<!DOCTYPE html>
<html>
  <head>
    <title>Example webrtc.io</title>
    <link type="text/css" href="./style.css" rel="stylesheet"></link>
  </head>
  <body onload="init()">
    <div id="videos">
      <audio id="you" src="http://upload.wikimedia.org/wikipedia/commons/0/0e/Inno_di_Mameli_instrumental.ogg" ></audio>
    </div>
    <div id="chatbox">
      <div id="messages">
      </div>
      <div id="chat">
        <input id="chatinput" type="text"/>
      </div>
    </div>
    <script src="./socket.io-client.js"></script>
    <script src="../lib/io.js"></script>
    <script>

      function init() {
        rtc.createStream('you', function(stream) {
          videos.push(document.getElementById('you'));
          rtc.attachStream(stream, 'you');
          subdivideVideos();
        });

        rtc.connect("http://10.242.11.31:8001/");
        rtc.on('add remote stream', function(stream, socketId) {
          console.log("ADDING REMOTE STREAM...");
          var clone = cloneVideo('you', socketId);
          rtc.attachStream(stream, clone.id);
          subdivideVideos();
        });
        rtc.on('disconnect stream', function(data) {
            console.log('remove ' + data);
            removeVideo(data);
        });
        initChat();
      }
      
      function onClose(data) {
//        video.parentNode.removeChild(video);
      }

      window.onresize = function(event) {
        subdivideVideos();
      };
    </script>
  </body>
</html>
